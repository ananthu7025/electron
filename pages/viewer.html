<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; worker-src 'self' blob:; connect-src 'self' http://localhost:3000 https://cdn.jsdelivr.net;">
    <title>Secure PDF Viewer</title>
    <link rel="stylesheet" href="../styles/viewer.css">
</head>
<body>
    <!-- Toolbar -->
    <div class="toolbar">
        <div class="toolbar-left">
            <button class="toolbar-btn" id="backBtn" title="Back to Dashboard">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Back</span>
            </button>

            <div class="toolbar-divider"></div>

            <div class="document-title" id="documentTitle">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M7 18H17V16H7V18ZM7 14H17V12H7V14ZM14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="#dc2626"/>
                </svg>
                <span id="fileName">Loading...</span>
            </div>
        </div>

        <div class="toolbar-center">
            <button class="toolbar-btn" id="prevBtn" title="Previous Page">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <div class="page-info">
                <input type="number" id="pageInput" class="page-input" value="1" min="1">
                <span class="page-separator">/</span>
                <span id="totalPages">0</span>
            </div>

            <button class="toolbar-btn" id="nextBtn" title="Next Page">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>

        <div class="toolbar-right">
            <button class="toolbar-btn" id="zoomOutBtn" title="Zoom Out">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M21 21L15 15M7 10H13M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>

            <span class="zoom-level" id="zoomLevel">100%</span>

            <button class="toolbar-btn" id="zoomInBtn" title="Zoom In">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M21 21L15 15M10 7V13M7 10H13M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>

            <button class="toolbar-btn" id="fitWidthBtn" title="Fit to Width">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M8 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5V8M21 8V5C21 4.46957 20.7893 3.96086 20.4142 3.58579C20.0391 3.21071 19.5304 3 19 3H16M16 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V16M3 16V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <button class="toolbar-btn" id="rotateBtn" title="Rotate">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M21.5 2V8H15.5M2.5 22V16H8.5M19.63 6.37C18.3968 5.13672 16.8486 4.27322 15.1545 3.87462C13.4604 3.47603 11.6891 3.55726 10.0369 4.10957C8.38466 4.66189 6.91666 5.66551 5.79583 6.99955C4.675 8.33359 3.94588 9.94535 3.68689 11.6584C3.4279 13.3714 3.64934 15.1219 4.32643 16.7231C5.00352 18.3243 6.11175 19.7152 7.53048 20.7472C8.94922 21.7792 10.6244 22.4151 12.3767 22.5891C14.129 22.7631 15.8983 22.4689 17.5 21.74" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Viewer Container -->
    <div class="viewer-container" id="viewerContainer">
        <div class="viewer-canvas-wrapper" id="canvasWrapper">
            <!-- Canvas will be inserted here -->
            <div class="loading-overlay" id="loadingOverlay">
                <div class="spinner-large"></div>
                <p>Loading PDF...</p>
            </div>
        </div>
    </div>

    <!-- Security Overlay (Watermarks added by preload.js) -->

    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
    <script src="../scripts/viewer.js"></script>
</body>
</html>
